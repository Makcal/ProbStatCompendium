---
id: Комбинаторная вероятность
aliases: []
tags: []
---
### Формулы
* $P(A)=\frac{\#desirable\_outcomes}{\#total\_outcomes}$
* **Перестановки** $n$ объектов: $P_n=n!$
* **Размещения** $n$ объектов на $k$ позиций (выбор $k$ штук из $n$ доступных с учётом порядка): $A_n^k=P_n^k=\frac{n!}{(n-k)!}$
* **Сочетания** $n$ объектов на $k$ позиций (выбор $k$ штук из $n$ доступных без учёта порядка): $C_n^k=\frac{n!}{(n-k)!k!}$
* Два **"последовательных" независимых** действия, у одного $C_1$ исходов, у другого - $C_2$: общее количество исходов - $C_1\cdot C_2$
* Два **(непересекающихся) варианта одно и того же** действия, у одного $C_1$ исходов, у другого - $C_2$: общее количество исходов - $C_1 + C_2$
### Техника
Важно уметь видеть в описании эксперимента, **из каких последовательных действий он состоит, и какие варианты у каждого действия есть**; а также понимать, где спрашивают перестановки (перемешивание), а где выбор объектов из общего количества и **важен ли порядок в итоговом выборе**.
##### Пример (лаба 2, №8)
> *Ten people enter a lift at the ground floor of an eight-storey building.*

Десять людей выбирают этаж, на который поедут, $\implies$ 10 **независимых действий** - исходы перемножаются.
**Каждый** человек выбирает один из 8 этажей $\implies$ 8 **альтернативных вариантов** - исходы складываются ($1+1+1+1+1+1+1+1$ дают 8 исходов всего).
**Следовательно**, каждый **элементарный исход** можно представить как **массив** 10 чисел от 1 до 8 и всего есть $8\cdot...\cdot8=8^{10}$ исходов.
### Поиск количества <u>подходящих</u> исходов
Зачастую, множество подходящих исходов (кстати, это само событие по определению) отличается от множества всех исходов какой-то одной частью. Обычно это:
- В задачах, где элементарные исходы, это **массивы** чисел, необходимо зафиксировать числа на желаемой позиции (позициях), а все остальные позиции подвергаются обычному ходу эксперимента:
    - В <u>перестановках</u> будем считать перестановки **из всех** объектов, **кроме** зафиксированных.
    - При <u>обычной независимой генерации <i>n</i> чисел</u> (как в примере выше), **на позициях зафиксированных** чисел **сокращается** количество **альтернативных исходов**, а общий подсчёт исходов **остаётся умножением**.
- В задачах, где происходит <u>выбор</u> объектов (в основном это размещения и сочетания), происходит **сужение множества для выбора** (см. пример ниже).

#### Пример (задача от BDSM)
> *Svyatoslav, Dima and Vanya went into the forest to pick mushrooms for the first time. Svyatoslav prepared before the hike and all of his 44 mushrooms are non-poisonous. Dima only knows about fly agarics, so his basket of 48 mushrooms is 75% poisoned. Vanya tried, but still there were only 2 non-poisoned mushrooms in his basket. When they dumped all the mushrooms on the table and counted them, it turned out that there were 127 mushrooms. Each of the guys took a mushroom to try. What is the probability that one toilet will not be enough for three people?*

Во-первых, *достаточно логично* предположить (или хотя бы явно написать, как вы лично поняли условие), что ребята берут разные грибы (**без повторений**). Во-вторых, текст прямо кричит (очевидно), что эксперимент является **выбором объектов** из множества (сочетания или размещения), а логика и **отсутствие в условии различий** между \[двумя отравленными или двумя съедобными] грибами (следовательно невозможность их сортировки) говорят, что **порядок не важен** и мы имеем дело с **сочетаниями**.
> [!NOTE]
> Хотя эксперимент и можно представить, как 3 **последовательных** действия, они не будут независимыми, потому что после каждого выбора изменяется количество альтернатив (грибов в куче), а значит и вероятности исходов действий. Конечно, можно написать что-то типа $\frac{a}{b}\cdot \frac{a-1}{b-1} \cdot \frac{a-2}{b-2}$, чтобы учесть заканчивающиеся грибы, но это же и выйдет через сочетания $C_a^3/C_b^3$ ($a$ хороших, $b$ всего).

Когда мы считаем общее количество исходов, нам без разницы, что какой гриб они берут, поэтому всего исходов $C_{127}^3$.
Далее нужно понять вопрос и разбить проблему на более мелкие части. Если одного туалета НЕ хватит, значит отравиться должны 2 **или** 3 человека. Значит, рассмотрим эти случаи по отдельности и сложим ответ.
##### 2 человека:
> [!IMPORTANT]
> Так как у ребят есть имена, то мы их можем различать, а значит **порядок отравленных важен**.

Есть 3 **альтернативных варианта**, кто отравится ($C_3^2=3$ это количество способов выбрать 2 человека на смерть из 3): ООЖ, ОЖО, ЖОО. В каждом из них **один обязан выЖить** и **два обязаны Отравиться** (мы **фиксируем** все позиции, чтобы **варианты не пересекались**, как например \*ОО пересекается с О\*О вариантом ООО). Как было сказано в алгоритме, мы **сужаем выбор** от 127 грибов до 58 съедобных и 69 ядовитых. Итого: $C_{58}^1C_{69}^2 + C_{58}^1C_{69}^2 + C_{58}^1C_{69}^2 = C_3^2C_{58}^1C_{69}^2=3\cdot 58\frac{69\cdot68}{2}$.
##### 3 человека
Здесь как ни крути, один вариант, где все отравятся, поэтому ответ - $C_{69}^3=\frac{69\cdot68\cdot67}{6}$ (стоит понимать как: первый берёт любой из 69, второй - любой из 68 оставшихся, третий - из 67; но порядок не важен, поэтому сокращаем в $6=3!$ раз - количество перестановок в любой группе из трёх грибов).
